---
title: "[Java] stateless와 stateful란?"
excerpt: "stateless와 stateful란? stateless와 stateful의 특징은? stateless와 stateful 아키텍처의 장단점은?"
date: 2024-04-06
last_modified_at: 2024-04-06
categories:
  - java
tags:
  - java-study
---

## 1. Question

`stateless`와 `stateful`란?

## 2. Answer

Java에서 `stateful`과 `stateless`는 객체나 컴포넌트가 상태 정보를 관리하는 방식을 나타낸다. 이 두 용어는 주로 서비스, 객체, 어플리케이션의 동작 방식을 설명할 때 사용된다.

### A. stateless

`stateless` 컴포넌트나 어플리케이션은 클라이언트의 상태 정보를 저장하지 않는다. 즉, 각 요청은 독립적이며, 이전 요청의 정보를 기반으로 다음 요청이 처리되지 않는다. `stateless` 방식은 요청 간에 데이터를 공유하지 않으므로, 각 요청은 모든 필요한 정보를 포함해야 한다.

* **독립적인 처리**: 각 요청은 서로 독립적으로 처리된다. 이는 요청이 서로 영향을 주지 않으며, 재사용성과 테스트 용이성을 향상시킨다.

* **확장성**: 상태 정보를 유지하기 않기 때문에, 서비스나 애플리케이션은 더 쉽게 확장할 수 있다. 요청을 처리하는 서버나 인스턴스 간에 부하를 분산하는 것이 더 간단하다.

* **병렬 처리**: 각 요청이 독립적이기 때문에, 병렬 처리와 분산 처리가 용이하다.

* **예시**: `HTTP` 프로토콜은 기본적으로 `stateless` 프로토콜이다. 각 `HTTP` 요청은 독립적이며, 서버는 클라이언트의 이전 상태 정보를 저장하지 않는다.

### B. stateful

`stateful` 컴포넌트나 애플리케이션은 클라이언트의 상태 정보를 저장하고 관리한다. 이는 클라이언트와 서버 간의 상호작용이 상태 정보에 기반하며, 한 요청의 결과가 다음 요청의 처리에 영향을 미칠 수 있음을 의미한다.

* **상태 정보의 유지**: 서버나 어플리케이션이 클라이언트의 상태 정보를 저장하고 이를 기반으로 후속 요청을 처리한다.

* **컨텍스트 기반 처리**: 처리는 사용자의 이전 상호작용에 따라 달라질 수 있으며, 이는 보다 개인화된 경험을 제공할 수 있다.

* **리소스 요구**: 상태 정보를 저장하고 관리하기 위해서는 추가적인 리소스가 필요하며, 상태 정보가 복잡해질수록 리소스 요구량이 증가한다.

* **예시**: 온라인 쇼핑 카드는 `stateful` 애플리케이션의 좋은 예이다. 사용자가 상품을 쇼핑 카트에 추가하면, 그 상태 정보가 서버에 저장되어 사용자가 다음에 방문했을 때 이어서 쇼핑을 계속할 수 있다.

## 3. Detail

### A. stateless 아키텍처의 장점

* **확장성(Scalability)**: `stateless` 애플리케이션은 서버 간에 세션 정보를 공유할 필요가 없어, 새로운 서버 인스턴스를 추가하여 수평적으로 확장하기가 쉽다.

* **신뢰성(Reliability)**: 각 요청이 독립적으로 처리되므로, 한 요처으이 실패가 다른 요청에 영향을 미치지 않는다. 서버 중 하나가 실패해도 다른 요청들은 영향을 받지 않고 처리된다.

* **무상태 프로토콜 호환성**: `HTTP`와 같은 무상태 프로토콜과 자연스럽게 호환되어, 웹 기반 애플리케이션 개발에 이점을 제공한다.

### B. stateless 아키텍쳐의 단점

* **정보의 중복 전송**: 각 요청이 모든 필요한 정보를 포함해야 하므로, 네트워크를 통해 중복 정보가 전송될 수 있다.

* **컨텍스트 정보 부족**: 서버가 이전 상호작용에 대한 컨텍스트를 기억하지 못하기 때문에, 요청마다 사용자 상태나 세션 정보를 재전송해야 한다.

### C. stateful 아키텍처의 장점

* **컨텍스트 유지**: 사용자의 상태 정보를 유지함으로써 더 풍부하고 개인화된 사용자 경험을 제공할 수 있다. 사용자의 이전 행동을 기반으로 한 응답이 가능하다.

* **네트워크 트래픽 감소**: 한 번 상태 정보가 설정되면, 서버에 유지되므로 매 요청마다 모든 정보를 전송할 필요가 없어 네트워크 트래픽이 줄어든다.

* **효율적인 데이터 처리**: 서버가 사용자의 상태를 알고 있기 때문에 데이터를 더 효율적으로 처리할 수 있다. 예를 들어, 사용자의 지난 선택을 바탕으로 다음 단계를 더 빠르게 제안할 수 있다.

### D. stateful 아키텍처의 단점

* **확장성 제한**: 상태 정보를 서버에 저장해야 하므로, 서버 간에 세션 정보를 동기화하는 복잡성이 증가한다. 이는 시스템을 확장할 때 어려움을 초래할 수 있다.

* **리소스 사용 증가**: 상태 정보를 유지하기 위해 추가 리소스가 필요하며, 많은 사용자 상태를 관리할 경우 리소스 요구량이 급격히 증가한다.

* **회복성 문제**: 서버에 장애가 발생하면, 해당 서버의 상태 정보가 손실되거나 재구성이 필요할 수 있다. 시스템의 전반적인 복원력에 영향을 미친다.

## 4. Reference

None