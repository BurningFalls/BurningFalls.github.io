---
title: "[Java] 포크/조인 프레임워크(Fork/Join Framework)란?"
excerpt: "포크/조인 프레임워크란? 포크/조인 프레임워크의 주요 컴포넌트는? 포크/조인 프레임워크의 작동 원리는? 포크/조인 프레임워크 사용 시 고려사항은?"
date: 2024-02-06
last_modified_at: 2024-02-06
categories:
  - java
tags:
  - java-study
---

## 1. Question

`포크/조인 프레임워크(Fork/Join Framework)`란?

## 2. Answer

Java의 `Fork/Join Framework`는 `Java 7`에서 소개되었으며, 대규모 병렬 처리를 위해 설계된 고성능 멀티스레딩 프레임워크이다. 이 프레임워크는 `분할 정복(divide and conquer)` 알고리즘을 기반으로 작업을 더 작은 작업으로 분할하고, 이를 병렬로 처리한 다음, 최종 결과를 결합하는 방식으로 작동한다. `Fork/Join Framework`는 CPU 코어를 효율적으로 활용하여 복잡한 연산을 빠르게 처리할 수 있게 해준다.

## 3. Detail

### A. 주요 컴포넌트

* **ForkJoinPool**: `Fork/Join Framework`의 핵심이 되는 스레드 풀이다. 이 풀은 작업을 수행할 워커 스레드를 관리하며, 작업의 분할과 실행을 조정한다.

* **ForkJoinTask**: 이 클래스는 분할 가능한 작업을 나타낸다. `ForkJoinTask`의 인스턴스는 `ForkJoinPool`에 의해 실행된다. `ForkJoinTask`에는 두 가지 중요한 메서드가 있다.
  * `fork()`: 작업을 비동기적으로 실행한다. 즉, 작업을 `ForkJoinPool`의 작업 큐에 추가하고 즉시 반환한다.
  * `join()`: 작업의 결과가 준비될 때까지 기다린 다음, 결과를 반환한다.

### B. 작동 원리

* **작업 분할(Fork)**: 복잡한 작업을 더 작은 작업으로 분할한다. 이러한 분할은 문제를 더 작게 만들어 해결 가능한 수준에 도달할 때까지 재귀적으로 발생한다.

* **작업 실행**: 분할된 작업은 병렬로 실행된다. 각 스레드는 자신의 작업 큐를 갖고 있으며, 다른 스레드의 작업 큐에서 작업을 훔쳐올 수 있는 `work-stealing` 알고리즘을 사용한다.

* **결과 결합(Join)**: 모든 하위 작업이 완료되면, 그 결과들은 최종 결과를 형성하기 위해 결합된다.

### C. 사용 시 고려사항

* **적절한 작업 크기**: 너무 많은 분할은 오버헤드를 증가시킬 수 있으며, 너무 적은 분할은 CPU 코어를 충분히 활용하지 못할 수 있다. 적절한 작업 크기를 선택하는 것이 중요하다.

* **스레드 안정성**: 병렬로 실행되는 작업은 스레드 안전하게 설계되어야 한다.

* **반복보다는 재귀**: `Fork/Join Framework`는 재귀적인 작업 분할에 최적화되어 있다. 가능한 한 반복보다는 재귀적인 접근 방식을 사용하는 것이 좋다.

## 4. Reference

None